(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),o=(a(94),a(8)),s=a.n(o),i=a(10),u=a(4),m=a(9),p=a(136),f=a(137),d=a(81),b=a(19),E=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{fluid:!0,className:"bg-dark text-white ft py-4"},r.a.createElement(f.a,{xs:1,md:3,className:"footer-text"},r.a.createElement(d.a,null,r.a.createElement("p",null,"Welcome to 7Book. Sharing Books is made easy and fun with 7Book.")),r.a.createElement(d.a,null,r.a.createElement("p",null,"Connect with your nearest Book lover and share your favourite books!")),r.a.createElement(d.a,null,r.a.createElement("ul",{className:"list-unstyled"},r.a.createElement("li",null,r.a.createElement("h5",null,"Our Links")),r.a.createElement(b.LinkContainer,{to:"/"},r.a.createElement("li",{className:"links"},"Home")),r.a.createElement("a",{className:"links",href:"https://github.com/rharshit82",target:"blank"},r.a.createElement("li",null,"Github"))))),r.a.createElement(f.a,null,r.a.createElement(d.a,{className:"text-center"},r.a.createElement("p",null,"Copyright \xa9 2021 7Book")))))},h=a(143),g=a(87),v=a(25),y=a(26),O=a(82),x=a.n(O),j=function(e){var t=e.isAuth,a=e.setIsAuth;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:" py-2",bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(b.LinkContainer,{to:"/"},r.a.createElement(h.a.Brand,{className:"ms-3 "},r.a.createElement("div",{className:"d-flex text-center justify-content-center align-items-center "},r.a.createElement("img",{src:x.a,style:{height:"60px"},alt:"edumatric"}),r.a.createElement("h1",{className:"site-title"},"7Book")))),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(g.a,{className:"ms-auto me-3"},r.a.createElement(b.LinkContainer,{to:"/"},r.a.createElement(g.a.Link,{className:"px-3"},r.a.createElement(v.a,{icon:y.c}),"Home")),r.a.createElement(b.LinkContainer,{to:"/addpost"},r.a.createElement(g.a.Link,{className:"px-3"},r.a.createElement(v.a,{icon:y.d}),"Add Post")),t?r.a.createElement("div",{className:"d-flex"},r.a.createElement(g.a.Link,{className:"px-3",onClick:function(){return localStorage.removeItem("userInfo"),void a(!1)}}," ",r.a.createElement(v.a,{icon:y.e}),"Logout"),r.a.createElement(b.LinkContainer,{to:"/myrequests"},r.a.createElement(g.a.Link,{className:"px-3"}," ",r.a.createElement(v.a,{icon:y.b}),"My Requests"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.LinkContainer,{to:"/login"},r.a.createElement(g.a.Link,{className:"px-3"}," ",r.a.createElement(v.a,{icon:y.e}),"Login")),r.a.createElement(b.LinkContainer,{to:"/register"},r.a.createElement(g.a.Link,{className:"px-3"}," ",r.a.createElement(v.a,{icon:y.f}),"Register")))))))},k=a(11),w=a.n(k),N=a(138),S=a(132),P=(a(123),a(12)),C=function(e){var t=e.posts,a=e.heading,n=Object(P.d)(),c=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(localStorage.getItem("userInfo"))){e.next=4;break}return n.show("Not Logged In",{type:"error"}),e.abrupt("return");case 4:return r={headers:{Authorization:"Bearer ".concat(a.token)}},e.prev=5,c=t.target.id,e.next=9,w.a.post("/api/requestswap",{postid:c},r);case 9:201===e.sent.status&&n.show("Requested",{type:"success"}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),l=e.t0.response?e.t0.response.data.message:e.t0,n.show(l,{type:"error"});case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h1",{className:" text-center mt-3"},a),r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{className:"singlepost",key:e._id},r.a.createElement(b.LinkContainer,{to:"/post/".concat(e._id)},r.a.createElement("h2",{className:"links text-center mt-3"},r.a.createElement("u",null,e.title))),r.a.createElement("div",{className:"d-flex postCont"},r.a.createElement("div",{className:"postImage",style:{width:"30%",marginLeft:"1em"}},void 0!=e.imageUri?r.a.createElement(N.a,{fluid:!0,src:e.imageUri,style:{}}):null),r.a.createElement("div",{style:{marginLeft:"2em"}},r.a.createElement("p",null,"Posted on ",e.createdAt.slice(0,10)," at"," "+e.createdAt.split("T")[1].split(".")[0]),r.a.createElement("p",null,"Description: ",e.desc),r.a.createElement("p",null,"Book Title: ",e.bookTitle),r.a.createElement("p",null,"Book Author: ",e.author),"Genres:",e.genArr.map((function(e){return r.a.createElement(S.a,{className:"mx-3 my-2",variant:"success"},e.text)})),r.a.createElement("p",null,"Interested Book/ Genre: ",e.interest)),r.a.createElement("div",{className:"ms-auto me-5 chat"},r.a.createElement("div",null,r.a.createElement(v.a,{icon:y.a,style:{marginRight:"0.5em"}}),"Chat"),r.a.createElement(S.a,{style:{marginTop:"1em"},variant:"warning",id:e._id,onClick:c},"Request Swap"))))})))))},A=a(139),I=function(e){var t=e.postTitles;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"Recent Posts"),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(b.LinkContainer,{to:"/post/".concat(e[1]),key:e[1]},r.a.createElement(A.a,{className:"links"},e[0]))}))))},L=a(140),T=a(18),B=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],i=o[1];return r.a.createElement("div",{className:"my-4"},r.a.createElement("p",null,"Search Posts"),r.a.createElement("input",{className:"mx-auto d-block",type:"text",placeholder:"Enter Search Query",value:a,onChange:function(e){return c(e.target.value)},style:{marginBottom:"1em"}}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(L.a,{"aria-label":"category"},r.a.createElement(S.a,{variant:"secondary",onClick:function(e){i("Genre")}},"Genre"),r.a.createElement(S.a,{variant:"secondary",onClick:function(e){i("BookTitle")}},"Book Title"),r.a.createElement(S.a,{variant:"secondary",onClick:function(e){i("Author")}},"Author"),r.a.createElement(S.a,{variant:"secondary",onClick:function(e){i("PostTitle")}},"Post Title")),r.a.createElement(T.Link,{to:"/search",state:{query:a,category:s}},r.a.createElement(S.a,{className:"d-block my-4 mx-auto",variant:"primary",size:"lg"},"Search"))))},D=function(e){var t=e.postTitles;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"},"Sidebar"),r.a.createElement(B,null),r.a.createElement(I,{postTitles:t})))},F=function(e){for(var t=e.postsPerPage,a=e.totalPosts,n=e.paginate,c=[],l=1;l<=Math.ceil(a/t);l++)c.push(l);return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"pagination align-content-center justify-content-center"},c.map((function(e){return r.a.createElement("li",{key:e,className:"page-item"},r.a.createElement("a",{href:"!#",onClick:function(t){t.preventDefault(),n(e)},className:"page-link"},e))}))))},G=a(141),R=function(){return r.a.createElement(G.a,{animation:"border",role:"status",style:{margin:"auto",width:"100px",height:"100px",display:"block"}},r.a.createElement("span",{className:"sr-only"},"Loading..."))},_=a(142),q=a(144),J=(a(79),function(){var e=Object(P.d)(),t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!0),m=Object(u.a)(o,2),p=m[0],f=m[1],d=Object(n.useState)(1),b=Object(u.a)(d,2),E=b[0],h=b[1],g=Object(n.useState)(5),v=Object(u.a)(g,1)[0];Object(n.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var a,n,r,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=JSON.parse(localStorage.getItem("userInfo")),n={headers:{Authorization:"Bearer ".concat(a.token)}},t.next=5,w.a.post("/api/myposts",{},n);case 5:r=t.sent,p&&(c=Array.from(r.data),f(!1),l(c)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),o=t.t0.response?t.t0.response.data.message:t.t0,e.show(o,{type:"error"});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){f(!1)}}),[]);var y=E*v,O=y-v,x=c.slice(O,y);return r.a.createElement("div",{className:"px-5 "},r.a.createElement("div",{className:""},null===c?r.a.createElement(R,null):0===c.length?r.a.createElement(R,null):r.a.createElement(C,{posts:x,loading:p,heading:"Your Posts"}),r.a.createElement(F,{postsPerPage:v,totalPosts:c.length,paginate:function(e){h(e)}})))}),M=a(84),U=Object(M.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})((function(e){var t=e.isGeolocationAvailable,a=e.isGeolocationEnabled,c=e.coords,l=Object(P.d)(),o=Object(n.useState)([]),m=Object(u.a)(o,2),p=m[0],f=m[1],d=Object(n.useState)(!0),b=Object(u.a)(d,2),E=b[0],h=b[1],g=Object(n.useState)(1),v=Object(u.a)(g,2),y=v[0],O=v[1],x=Object(n.useState)(5),j=Object(u.a)(x,1)[0];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){var n,r,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=9;break}if(!a||null===c){e.next=9;break}return n=c.latitude,r=c.longitude,e.next=7,w.a.post("/api/nearposts",{latitude:n,longitude:r});case 7:o=e.sent,E&&(i=Array.from(o.data),h(!1),f(i));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),u=e.t0.response?e.t0.response.data.message:e.t0,l.show(u,{type:"error"}),console.log(u);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]);var k=y*j,N=k-j,S=p.slice(N,k);return r.a.createElement("div",{className:"px-5 "},r.a.createElement("div",{className:""},null===p?r.a.createElement("div",null,"No Post Found"):0===p.length?r.a.createElement("div",null,"No Post Found"):r.a.createElement(C,{posts:S,loading:E,heading:"Post Results"}),r.a.createElement(F,{postsPerPage:j,totalPosts:p.length,paginate:function(e){O(e)}})))})),H=function(e){var t=e.isAuth,a=Object(P.d)(),c=Object(n.useState)([]),l=Object(u.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)([]),f=Object(u.a)(p,2),d=f[0],b=f[1],E=Object(n.useState)(!0),h=Object(u.a)(E,2),g=h[0],v=h[1],y=Object(n.useState)(1),O=Object(u.a)(y,2),x=O[0],j=O[1],k=Object(n.useState)(5),N=Object(u.a)(k,1)[0];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("/api/fetch_posts");case 3:t=e.sent,g&&(n=Array.from(t.data),v(!1),m(n),b(n.map((function(e){return[e.title,e._id]})).slice(0,6))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r=e.t0.response?e.t0.response.data.message:e.t0,a.show(r,{type:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){v(!1)}}),[]);var S=x*N,A=S-N,I=o.slice(A,S);return r.a.createElement("div",{className:"d-flex mainCont"},r.a.createElement("div",{className:"posts"},r.a.createElement(_.a,{defaultActiveKey:"recentposts",id:"uncontrolled-tab-example",className:"mb-3"},r.a.createElement(q.a,{eventKey:"recentposts",title:"Recent Posts"},r.a.createElement("div",{className:""},null===o?r.a.createElement(R,null):0===o.length?r.a.createElement(R,null):r.a.createElement(C,{posts:I,loading:g,heading:"Recent Posts"}),r.a.createElement(F,{postsPerPage:N,totalPosts:o.length,paginate:function(e){j(e)}}))),r.a.createElement(q.a,{eventKey:"yourposts",title:"Your Posts"},t?r.a.createElement(J,null):r.a.createElement("h2",null,"Not Logged In")),r.a.createElement(q.a,{eventKey:"nearestposts",title:"Posts near You"},r.a.createElement(U,null)))),r.a.createElement("div",{className:"sidebar mx-5"},r.a.createElement(D,{postTitles:d})))},z=a(2),K=a(67);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){var t=e.setIsAuth,a=e.setProfileFilled,c=Object(m.t)(),l=Object(P.d)(),o=Object(n.useState)({email:"",password:""}),p=Object(u.a)(o,2),f=p[0],d=p[1],b=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,w.a.post("/auth/login",{email:f.email,password:f.password});case 4:r=e.sent,localStorage.setItem("userInfo",JSON.stringify(r.data)),201===r.status&&(r.data.isProfile?(a(!0),c("/")):a(!1),t(!0),l.show("Login Success",{type:"success"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),o=e.t0.response?e.t0.response.data.message:e.t0,l.show(o,{type:"error"});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"mt"},r.a.createElement("h3",{className:"text-center"},"User Login"),r.a.createElement(K.a,{className:"w-50 m-auto text-center",onSubmit:b},r.a.createElement(K.a.Group,{controlId:"email"},r.a.createElement(K.a.Label,null,"Email address"),r.a.createElement(K.a.Control,{type:"email",placeholder:"Enter email",value:f.email,onChange:function(e){return d(Y({},f,{email:e.target.value}))}})),r.a.createElement(K.a.Group,{controlId:"password"},r.a.createElement(K.a.Label,null,"Password"),r.a.createElement(K.a.Control,{type:"password",placeholder:"Password",value:f.password,onChange:function(e){return d(Y({},f,{password:e.target.value}))}})),r.a.createElement(S.a,{className:"mt-3",variant:"primary",type:"submit"},"Submit")))};function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X=function(e){var t=e.setIsAuth,a=Object(m.t)(),c=Object(P.d)(),l=Object(n.useState)({name:"",email:"",password:""}),o=Object(u.a)(l,2),p=o[0],f=o[1],d=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,w.a.post("/auth/register",{name:p.name,email:p.email,password:p.password});case 4:r=e.sent,localStorage.setItem("userInfo",JSON.stringify(r.data)),201===r.status&&(t(!0),a("/profile"),c.show("Registration Successful",{type:"success"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.response?e.t0.response.data.message:e.t0,c.show(l,{type:"error"});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"mt"},r.a.createElement("h3",{className:"text-center"},"User Register"),r.a.createElement(K.a,{className:"w-50 m-auto text-center",onSubmit:d},r.a.createElement(K.a.Group,{controlId:"name"},r.a.createElement(K.a.Label,null,"Name"),r.a.createElement(K.a.Control,{type:"text",placeholder:"Enter your Name",value:p.name,onChange:function(e){return f(V({},p,{name:e.target.value}))}})),r.a.createElement(K.a.Group,{controlId:"email"},r.a.createElement(K.a.Label,null,"Email address"),r.a.createElement(K.a.Control,{type:"email",placeholder:"Enter email",value:p.email,onChange:function(e){return f(V({},p,{email:e.target.value}))}}),r.a.createElement(K.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(K.a.Group,{controlId:"password"},r.a.createElement(K.a.Label,null,"Password"),r.a.createElement(K.a.Control,{type:"password",placeholder:"Password",value:p.password,onChange:function(e){return f(V({},p,{password:e.target.value}))}})),r.a.createElement(S.a,{className:"mt-3",variant:"primary",type:"submit"},"Submit")))};function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){Object(z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te=function(e){var t=e.setProfileFilled,a=Object(m.t)(),c=Object(P.d)(),l=Object(n.useState)({place_name:"",latitude:null,longitude:null}),o=Object(u.a)(l,2),p=o[0],f=o[1],d=Object(n.useState)({genre:"61f0132429cbf76c5b4c7ebf"}),b=Object(u.a)(d,2),E=b[0],h=b[1],g=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r=JSON.parse(localStorage.getItem("userInfo")),console.log(r),e.next=6,w.a.post("/auth/profile",{location:p.place_name,latitude:p.latitude,longitude:p.longitude,user_id:r._id,fav_genre:E.genre});case 6:201===e.sent.status&&(t(!0),a("/"),c.show("Profile Filled Successfully",{type:"success"})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),l=e.t0.response?e.t0.response.data.message:e.t0,c.show(l,{type:"error"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(E.location.length>0)){e.next=7;break}return a=E.location.replace(" ","%20"),e.next=5,w.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a,".json?access_token=pk.eyJ1IjoicmhhcnNoaXQ4MiIsImEiOiJja3lzdHZrZWsxN2x1MnFwdG5odDU0dDY4In0.Vzpw618KcpQyA3sPLPMpNQ&autocomplete=false&limit=1&country=IN&worldview=in"));case 5:n=e.sent,f({place_name:n.data.features[0].place_name,latitude:n.data.features[0].geometry.coordinates[1],longitude:n.data.features[0].geometry.coordinates[0]});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"mt"},r.a.createElement("h3",{className:"text-center"},"User Profile"),r.a.createElement(K.a,{className:"w-50 m-auto text-center",onSubmit:g},r.a.createElement(K.a.Group,{controlId:"location"},r.a.createElement(K.a.Label,null,"Location"),r.a.createElement(K.a.Control,{type:"text",placeholder:"Enter your location",value:E.location,onChange:function(e){return h(ee({},E,{location:e.target.value}))}})),r.a.createElement(S.a,{style:{marginTop:"1em",marginBottom:"1em"},onClick:function(e){return v(e)}},"Get Location From Text"),p.place_name&&p.place_name.length>0?r.a.createElement("div",null,r.a.createElement("p",null,"Your Location: ",p.place_name)):null,r.a.createElement(K.a.Group,{controlId:"genre"},r.a.createElement(K.a.Label,null,"Select your favourite genre"),r.a.createElement(K.a.Select,{"aria-label":"genre",onChange:function(e){return h(ee({},E,{genre:e.target.value}))}},[{id:"61f0132429cbf76c5b4c7ebf",text:"Adult Fiction"},{id:"61f0133329cbf76c5b4c7ec0",text:"Horror"},{id:"61f0133f29cbf76c5b4c7ec1",text:"Fiction"},{id:"61f0134629cbf76c5b4c7ec2",text:"Fantasy"},{id:"61f0134d29cbf76c5b4c7ec3",text:"Mystery"},{id:"61f0135529cbf76c5b4c7ec4",text:"Politics"},{id:"61f0135c29cbf76c5b4c7ec5",text:"Science Fiction"},{id:"61f0136329cbf76c5b4c7ec6",text:"Thriller"},{id:"61f0136b29cbf76c5b4c7ec7",text:"War"},{id:"61f0137329cbf76c5b4c7ec8",text:"Art"},{id:"61f0137929cbf76c5b4c7ec9",text:"Biography"},{id:"61f0138029cbf76c5b4c7eca",text:"Business"},{id:"61f0138829cbf76c5b4c7ecb",text:"Classics"},{id:"61f0138f29cbf76c5b4c7ecc",text:"Comics"},{id:"61f0139529cbf76c5b4c7ecd",text:"Contemporary"},{id:"61f013a029cbf76c5b4c7ece",text:"Cookbooks"},{id:"61f013a629cbf76c5b4c7ecf",text:"Crime"},{id:"61f013ad29cbf76c5b4c7ed0",text:"History"},{id:"61f013b629cbf76c5b4c7ed1",text:"Humor and Comedy"},{id:"61f013c129cbf76c5b4c7ed2",text:"Memoir"}].map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.text)})))),r.a.createElement(S.a,{className:"mt-3",variant:"primary",type:"submit"},"Submit")))},ae=function(e){var t=e.post;return Object(n.useEffect)((function(){})),r.a.createElement("div",{className:"w-75"},r.a.createElement("div",{className:"singlepost",key:t._id},r.a.createElement("h2",{className:" text-center mt-3"},r.a.createElement("u",null,t.title)),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{style:{width:"30%",marginLeft:"1em"}},void 0!=t.imageUri?r.a.createElement(N.a,{fluid:!0,src:t.imageUri,style:{}}):null),r.a.createElement("div",{style:{marginLeft:"2em"}},r.a.createElement("p",null,"Posted on ",t.createdAt.slice(0,10)," at"," "+t.createdAt.split("T")[1].split(".")[0]),r.a.createElement("p",null,"Description: ",t.desc),r.a.createElement("p",null,"Book Title: ",t.bookTitle),r.a.createElement("p",null,"Book Author: ",t.author),"Genres:",t.genArr.map((function(e){return r.a.createElement(S.a,{className:"mx-3 my-2",variant:"success"},e.text)}))),r.a.createElement("div",{className:"ms-auto me-5 chat"},r.a.createElement(v.a,{icon:y.a,style:{marginRight:"0.5em"}}),"Chat"))))},ne=function(){var e=Object(P.d)(),t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(m.x)().id;return Object(n.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.post("/api/fetch_post",{id:o});case 3:a=t.sent,l(a.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),n=t.t0.response?t.t0.response.data.message:t.t0,e.show(n,{type:"error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r.a.createElement("div",{id:"mt"},null===c?r.a.createElement(R,null):r.a.createElement(ae,{post:c}))},re=a(65);function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe=function(e){var t=e.isAuth,a=Object(n.useState)([]),c=Object(u.a)(a,2),l=c[0],o=c[1],p=Object(n.useState)([{id:"61f0132429cbf76c5b4c7ebf",text:"Adult Fiction"},{id:"61f0133329cbf76c5b4c7ec0",text:"Horror"},{id:"61f0133f29cbf76c5b4c7ec1",text:"Fiction"},{id:"61f0134629cbf76c5b4c7ec2",text:"Fantasy"},{id:"61f0134d29cbf76c5b4c7ec3",text:"Mystery"},{id:"61f0135529cbf76c5b4c7ec4",text:"Politics"},{id:"61f0135c29cbf76c5b4c7ec5",text:"Science Fiction"},{id:"61f0136329cbf76c5b4c7ec6",text:"Thriller"},{id:"61f0136b29cbf76c5b4c7ec7",text:"War"},{id:"61f0137329cbf76c5b4c7ec8",text:"Art"},{id:"61f0137929cbf76c5b4c7ec9",text:"Biography"},{id:"61f0138029cbf76c5b4c7eca",text:"Business"},{id:"61f0138829cbf76c5b4c7ecb",text:"Classics"},{id:"61f0138f29cbf76c5b4c7ecc",text:"Comics"},{id:"61f0139529cbf76c5b4c7ecd",text:"Contemporary"},{id:"61f013a029cbf76c5b4c7ece",text:"Cookbooks"},{id:"61f013a629cbf76c5b4c7ecf",text:"Crime"},{id:"61f013ad29cbf76c5b4c7ed0",text:"History"},{id:"61f013b629cbf76c5b4c7ed1",text:"Humor and Comedy"},{id:"61f013c129cbf76c5b4c7ed2",text:"Memoir"}]),f=Object(u.a)(p,2),d=f[0],b=f[1],E=Object(m.t)(),h=Object(P.d)(),g=Object(n.useState)({photo:"",title:"",desc:"",bookTitle:"",author:"",interest:"",genre:""}),v=Object(u.a)(g,2),y=v[0],O=v[1];Object(n.useEffect)((function(){t||E("/login")}),[]);var x=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=JSON.parse(localStorage.getItem("userInfo")),n={headers:{"content-type":"multipart/form-data",Accept:"multipart/form-data",Authorization:"Bearer ".concat(a.token)}},(r=new FormData).append("photo",y.photo),r.append("title",y.title),r.append("desc",y.desc),r.append("bookTitle",y.bookTitle),r.append("author",y.author),r.append("interest",y.interest),r.append("genre",l.map((function(e){return e.id}))),e.prev=11,e.next=14,w.a.post("/api/add_post",r,n);case 14:201===e.sent.status&&h.show("Post Added Successfuly",{type:"success"}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(11),c=e.t0.response?e.t0.response.data.message:e.t0,h.show(c,{type:"error"});case 22:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"mt"},r.a.createElement("h3",{className:"text-center"},"Add new Post"),r.a.createElement("div",{className:"container my-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6 col-sm-6 text-center uploadphoto"},r.a.createElement("p",null,"Upload An Image")),r.a.createElement("div",{className:"col-lg-6 col-sm-6 text-center"},r.a.createElement("input",{type:"file",accept:".png, .jpg, .jpeg",name:"photo",onChange:function(e){O(le({},y,{photo:e.target.files[0]}))}})))),r.a.createElement(K.a,{className:"w-75 m-auto text-center",onSubmit:x},r.a.createElement(K.a.Group,{className:"my-2",controlId:"title"},r.a.createElement(K.a.Label,null,"Title"),r.a.createElement(K.a.Control,{type:"text",placeholder:"Enter Post Title",value:y.title,onChange:function(e){return O(le({},y,{title:e.target.value}))}})),r.a.createElement(K.a.Group,{className:"my-2",controlId:"content"},r.a.createElement(K.a.Label,null,"Description"),r.a.createElement(K.a.Control,{as:"textarea",rows:8,placeholder:"Enter Description",value:y.desc,onChange:function(e){return O(le({},y,{desc:e.target.value}))}})),r.a.createElement(K.a.Group,{className:"my-2",controlId:"booktitle"},r.a.createElement(K.a.Label,null,"Book Title"),r.a.createElement(K.a.Control,{type:"text",placeholder:"Enter Book Title",value:y.bookTitle,onChange:function(e){return O(le({},y,{bookTitle:e.target.value}))}})),r.a.createElement(K.a.Group,{className:"my-2",controlId:"title"},r.a.createElement(K.a.Label,null,"Author"),r.a.createElement(K.a.Control,{type:"text",placeholder:"Enter Author's name",value:y.author,onChange:function(e){return O(le({},y,{author:e.target.value}))}})),l.length>0?l.map((function(e){return r.a.createElement(A.a,{key:e.id,variant:"primary"},e.text)})):null,r.a.createElement(K.a.Group,{controlId:"genre"},r.a.createElement(K.a.Label,null,"Select Book Genre"),r.a.createElement(K.a.Select,{"aria-label":"genre",onChange:function(e){return function(e){o([].concat(Object(re.a)(l),[{id:e.target.value,text:d.filter((function(t){return t.id==e.target.value}))[0].text}])),b(d.filter((function(t){return t.id!==e.target.value})))}(e)}},r.a.createElement("option",{value:""},"Select your Option"),d.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.text)})))),r.a.createElement(K.a.Group,{className:"my-2",controlId:"interest"},r.a.createElement(K.a.Label,null,"Interested Book/ Genre"),r.a.createElement(K.a.Control,{type:"text",placeholder:"Enter your Interest",value:y.interest,onChange:function(e){return O(le({},y,{interest:e.target.value}))}})),r.a.createElement(S.a,{className:"mt-3",variant:"primary",type:"submit"},"Submit")))},se=a(85),ie=(a(128),function(){var e=Object(P.d)(),t=Object(m.r)().state,a=t.query,c=t.category,l=Object(n.useState)([]),o=Object(u.a)(l,2),p=o[0],f=o[1],d=Object(n.useState)(!0),b=Object(u.a)(d,2),E=b[0],h=b[1],g=Object(n.useState)(1),v=Object(u.a)(g,2),y=v[0],O=v[1],x=Object(n.useState)(5),j=Object(u.a)(x,1)[0];Object(n.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var n,r,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.post("/api/searchposts",{query:a,category:c});case 3:n=t.sent,E&&(r=Array.from(n.data),h(!1),f(r)),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),l=t.t0.response?t.t0.response.data.message:t.t0,e.show(l,{type:"error"}),console.log(l);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){h(!1)}}),[]);var k=y*j,N=k-j,S=p.slice(N,k);return r.a.createElement("div",{className:"px-5 "},r.a.createElement("div",{className:""},null===p?r.a.createElement("div",null,"No Post Found"):0===p.length?r.a.createElement("div",null,"No Post Found"):r.a.createElement(C,{posts:S,loading:E,heading:"Post Results"}),r.a.createElement(F,{postsPerPage:j,totalPosts:p.length,paginate:function(e){O(e)}})))}),ue=(a(129),function(){var e=Object(P.d)(),t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!0),m=Object(u.a)(o,2),p=m[0],f=m[1];return Object(n.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var a,n,r,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=JSON.parse(localStorage.getItem("userInfo")),n={headers:{Authorization:"Bearer ".concat(a.token)}},t.next=5,w.a.post("/api/myrequests",{},n);case 5:r=t.sent,p&&(c=Array.from(r.data),f(!1),l(c)),console.log(r.data),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),o=t.t0.response?t.t0.response.data.message:t.t0,e.show(o,{type:"error"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){f(!1)}}),[]),r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"},"My Requests"),c.length>0?c.map((function(e){return r.a.createElement("div",{className:"requestbox"},r.a.createElement("h3",null,"Requested Post Title: ",r.a.createElement("u",null,e.postTitle)," "),r.a.createElement("p",null,"Request From:",r.a.createElement(S.a,{variant:"info",className:"mx-4"}," ",e.username)),r.a.createElement("p",null,"User Id of Request Sender: ",e.user))})):r.a.createElement("h3",{classname:"text-center"},"No Request Found"))}),me=function(){var e=Object(m.t)(),t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),p=Object(u.a)(o,2),f=p[0],d=p[1];return Object(n.useEffect)((function(){!f&&c&&e("/profile")}),[f,c]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=JSON.parse(localStorage.getItem("userInfo")),a={headers:{Authorization:"Bearer ".concat(t.token)}},e.next=5,w.a.post("/auth/is_auth",{},a);case 5:n=e.sent,d(n.data.isProfile),l(n.data.isAuth),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){l(!1)}}),[]),r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(j,{isAuth:c,setIsAuth:l})),r.a.createElement("main",null,r.a.createElement(m.f,null,r.a.createElement(m.d,{exact:!0,path:"/post/:id",element:r.a.createElement(ne,null)}),r.a.createElement(m.d,{exact:!0,path:"/addimage/:id",element:r.a.createElement(se.a,null)}),r.a.createElement(m.d,{exact:!0,path:"/search",element:r.a.createElement(ie,null)}),r.a.createElement(m.d,{exact:!0,path:"/myrequests",element:r.a.createElement(ue,null)}),r.a.createElement(m.d,{path:"/",element:r.a.createElement(H,{isAuth:c})}),r.a.createElement(m.d,{path:"/addpost",element:r.a.createElement(oe,{isAuth:c})}),r.a.createElement(m.d,{path:"/register",element:r.a.createElement(X,{isAuth:c,setIsAuth:l})}),r.a.createElement(m.d,{path:"/login",element:r.a.createElement(Q,{isAuth:c,setIsAuth:l,setProfileFilled:d})}),r.a.createElement(m.d,{path:"/profile",element:r.a.createElement(te,{isAuth:c,setIsAuth:l,setProfileFilled:d})}),r.a.createElement(m.d,{path:"/profile",element:r.a.createElement(te,{isAuth:c,setIsAuth:l,setProfileFilled:d})}))),r.a.createElement("footer",null,r.a.createElement(E,null)))},pe=(a(130),a(86)),fe={position:P.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:P.c.SCALE};l.a.render(r.a.createElement(P.a,Object.assign({template:pe.a},fe),r.a.createElement(T.BrowserRouter,null,r.a.createElement(me,null))),document.getElementById("root"))},79:function(e,t,a){},82:function(e,t,a){e.exports=a.p+"static/media/siteLogo.764efc30.png"},85:function(e,t,a){"use strict";(function(e){var n=a(8),r=a.n(n),c=a(10),l=a(4),o=a(0),s=a.n(o),i=a(67),u=a(132),m=a(9),p=a(11),f=a.n(p);t.a=function(){var t=Object(o.useState)(null),a=Object(l.a)(t,2),n=a[0],p=a[1],d=Object(m.x)().id,b=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=JSON.parse(localStorage.getItem("userInfo")),c={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a.token)}},(l=new FormData).append("image",n),l.append("id",d),e.prev=6,e.next=9,f.a.post("/api/upload",l,c);case 9:201===e.sent.status&&alert.show("Image Added Successfuly",{type:"success"}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),o=e.t0.response?e.t0.response.data.message:e.t0,alert.show(o,{type:"error"});case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"formdiv"},s.a.createElement(i.a,{className:"form",onSubmit:function(e){return b(e)}},s.a.createElement(i.a.Group,{className:"mb-3",controlId:"Img"},s.a.createElement(i.a.Label,null,"Upload Image"),s.a.createElement(i.a.Control,{type:"file",multiple:!1,onChange:function(t){return function(t){t.preventDefault();var a=t.target.files[0],n=new window.FileReader;n.readAsArrayBuffer(a),n.onloadend=function(){p(e(n.result))}}(t)}})),s.a.createElement(u.a,{variant:"primary",type:"submit"},"Submit")))}}).call(this,a(124).Buffer)},89:function(e,t,a){e.exports=a(131)},94:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.55589ea3.chunk.js.map